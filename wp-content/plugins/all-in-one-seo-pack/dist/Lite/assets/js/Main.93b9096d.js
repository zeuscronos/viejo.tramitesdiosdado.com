import{u as U}from"./vue-router.41e9d860.js";import{a as M,f as H,e as Y,b as W}from"./index.4b887428.js";import{C as z}from"./Index.d5e64911.js";import K from"./DatabaseTools.1163b533.js";import{B as V}from"./Checkbox.6a913600.js";import"./translations.e71e2202.js";import{_ as y}from"./_plugin-vue_export-helper.eefbdd86.js";import{_ as A,a as k}from"./default-i18n.65d58dd6.js";import{a6 as a,o as n,c as l,F as S,af as T,l as m,a2 as u,a7 as w,$ as g,_ as p,a1 as b,a4 as C,R as O,a5 as N,W as B}from"./runtime-core.esm-bundler.ce5add0b.js";import{C as P}from"./Index.2a391835.js";import{C as F}from"./Card.597c7ae2.js";import{C as G}from"./Tabs.13bb57b9.js";import{C as j}from"./Index.25ae8dfb.js";import{C as q}from"./Upload.a2db2422.js";import{C as J}from"./SettingsRow.35256805.js";import{G as Q,a as X}from"./Row.bb9acf3f.js";import{D as Z}from"./datetime.f197aeae.js";import{S as ee}from"./Close.ccd53ef3.js";import{u as $}from"./ToolsStore.fc4d835f.js";import{a as te}from"./runtime-dom.esm-bundler.dc49ee3e.js";import oe from"./HtaccessEditor.e8c751a3.js";import se from"./ImportExport.d7584117.js";import ne from"./RobotsEditor.4a80c577.js";import ie from"./SystemStatus.3e532e9d.js";import re from"./WpCode.59f5ca3c.js";import{u as ae}from"./RobotsTxt.c6bbeba3.js";import"./helpers.633a054c.js";import"./license.388ee2cc.js";import"./upperFirst.5dc701f8.js";/* empty css             */import"./params.af7ed354.js";import"./Header.ab7dd0a5.js";import"./addons.9cee8bbb.js";import"./ScrollAndHighlight.f49826ae.js";import"./ScrollTo.81bea8a7.js";import"./LicenseKeyBar.40cfe2b2.js";import"./LogoGear.32164283.js";import"./AnimatedNumber.97e7e241.js";import"./numbers.cdba2587.js";import"./Logo.3715aad2.js";import"./Trash.87a7d946.js";import"./Support.1c4a9051.js";import"./date.f7db1924.js";import"./constants.bc5863fe.js";import"./Url.9f0afcb2.js";import"./Button.9a301412.js";import"./Pencil.d82df6a1.js";import"./Exclamation.fc507dc9.js";import"./Gear.0f79dbf5.js";import"./Slide.3003ef51.js";import"./Network.338b9e3b.js";import"./ToolsSettings.177430fd.js";import"./Blur.92695742.js";import"./Index.72794c8a.js";import"./RequiredPlans.515ee73d.js";import"./Tooltip.23c7170d.js";import"./Caret.cd869c5d.js";import"./Checkmark.762f711e.js";import"./ProBadge.e6ec5f9a.js";import"./Information.98ebb530.js";import"./Editor.179f32d8.js";import"./isEqual.59768dc1.js";import"./_baseIsEqual.c0ca09f7.js";import"./_getTag.6fb74b2e.js";import"./_baseClone.e7cb118a.js";import"./_arrayEach.6af5abac.js";import"./Input.f04bee4d.js";import"./Plus.c9b03af8.js";import"./History.355a3d4d.js";import"./Refresh.f06a7e16.js";import"./Radio.b8474a23.js";import"./Download.aa34559d.js";import"./vuedraggable.umd.dac39944.js";import"./UnwantedBots.c3c13281.js";import"./RadioToggle.18655b2f.js";import"./Ellipse.79856822.js";import"./External.641efa63.js";import"./Row.fec407d2.js";const R="all-in-one-seo-pack",le={emits:["update"],setup(){return{rootStore:M(),addonsStore:H()}},components:{BaseCheckbox:V},props:{loading:Boolean,disabled:Boolean},data(){return{selectedAddons:{},strings:{runAction:A("Run Action",R),noAddons:A("There are no active addons at the moment.",R)}}},computed:{activeAddons(){return this.addonsStore.addons.filter(e=>e.isActive)},selectedSkus(){return Object.keys(this.selectedAddons).filter(e=>this.selectedAddons[e])},selectedAddonsNames(){return this.activeAddons.filter(e=>this.selectedSkus.includes(e.sku)).map(e=>e.name)}}},ce={class:"aioseo-addons-list"},de={key:1};function ue(e,o,s,c,t,i){const d=a("base-checkbox"),_=a("base-button");return n(),l("div",ce,[i.activeAddons.length>0?(n(),l(S,{key:0},[(n(!0),l(S,null,T(i.activeAddons,(h,v)=>(n(),l("div",{key:v},[m(d,{size:"medium",modelValue:t.selectedAddons[h.sku],"onUpdate:modelValue":f=>t.selectedAddons[h.sku]=f,disabled:s.disabled},{default:u(()=>[w(g(h.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]))),128)),p("div",null,[m(_,{type:"blue",size:"medium",onClick:o[0]||(o[0]=h=>(e.$emit("update",i.selectedSkus),e.$emit("addons-selected",i.selectedAddonsNames))),loading:s.loading,disabled:s.disabled||i.selectedSkus.length===0},{default:u(()=>[w(g(t.strings.runAction),1)]),_:1},8,["loading","disabled"])])],64)):(n(),l("b",de,g(t.strings.noAddons),1))])}const pe=y(le,[["render",ue],["__scopeId","data-v-a1f4dc34"]]),me="all-in-one-seo-pack",ge={emits:["update"],setup(){return{rootStore:M()}},components:{BaseCheckbox:V,GridColumn:Q,GridRow:X},props:{loading:Boolean,disabled:Boolean},data(){return{options:{},strings:{updateOptions:A("Update Options",me)}}},mounted(){this.rootStore.aioseo.deprecatedOptions.forEach(e=>{e.enabled&&(this.options[e.value]=!0)})}},he={class:"aioseo-deprecated-options"},_e=p("br",null,null,-1),be=p("br",null,null,-1),fe=p("br",null,null,-1);function Ae(e,o,s,c,t,i){const d=a("base-checkbox"),_=a("grid-column"),h=a("grid-row"),v=a("base-button");return n(),l("div",he,[m(h,{class:"settings"},{default:u(()=>[(n(!0),l(S,null,T(c.rootStore.aioseo.deprecatedOptions,(f,L)=>(n(),b(_,{key:L,xl:"6",sm:"12"},{default:u(()=>[m(d,{size:"medium",modelValue:t.options[f.value],"onUpdate:modelValue":x=>t.options[f.value]=x,disabled:s.disabled},{default:u(()=>[w(g(f.label),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1024))),128))]),_:1}),_e,m(v,{type:"blue",size:"medium",onClick:o[0]||(o[0]=f=>e.$emit("update",t.options)),loading:s.loading,disabled:s.disabled},{default:u(()=>[w(g(t.strings.updateOptions),1)]),_:1},8,["loading","disabled"]),be,fe])}const we=y(ge,[["render",Ae]]),ve={setup(){return{optionsStore:Y()}},computed:{infoItems(){return[{label:"Migrated Version",value:this.optionsStore.internalOptions.internal.migratedVersion},{label:"First Activated",value:this.optionsStore.internalOptions.internal.firstActivated!==0?Z.fromMillis(this.optionsStore.internalOptions.internal.firstActivated*1e3).toFormat("MMMM d, yyyy"):!1}]}}},ke={class:"v3-migration-info aioseo-description"},Se={class:"info-items"},ye={key:0},De={key:1};function Ce(e,o,s,c,t,i){return n(),l("div",ke,[p("ul",Se,[(n(!0),l(S,null,T(i.infoItems,(d,_)=>(n(),l("li",{key:_},[d.value?(n(),l("span",ye,g(d.label),1)):C("",!0),d.value?(n(),l("span",De,g(d.value),1)):C("",!0)]))),128))])])}const Me=y(ve,[["render",Ce]]),Te={class:"aioseo-writing-assistant"},Le={__name:"WritingAssistant",setup(e){const o=$(),s="all-in-one-seo-pack",c={resetLogins:A("Reset SEOBoost Logins",s)};let t=!1;const i=()=>{confirm(A("Are you sure you want to reset SEOBoost logins?",s))&&(t=!0,o.doTask({action:"aioseo-reset-seoboost-logins"}).finally(()=>{alert(A("SEOBoost logins have been reset.",s)),t=!1}))};return(d,_)=>{const h=a("base-button");return n(),l("div",Te,[m(h,{type:"blue",size:"medium",onClick:i,loading:O(t),disabled:O(t)},{default:u(()=>[w(g(c.resetLogins),1)]),_:1},8,["loading","disabled"])])}}},xe={setup(){return{rootStore:M(),toolsStore:$()}},components:{AddonsList:pe,CoreAlert:P,CoreCard:F,CoreMainTabs:G,CoreModal:j,CoreNetworkSiteSelector:q,CoreSettingsRow:J,DeprecatedOptions:we,MigrationInfo:Me,SvgClose:ee,WritingAssistant:Le},props:{extraActions:{type:Array,required:!1}},data(){return{site:{},tabsKey:0,doingActionKey:0,activeTab:"general",currentAction:"",currentData:{},showAreYouSureModal:!1,doingAction:[],selectedAddonsNames:[],strings:{selectSite:"Select Site",cardLabel:"Debug",selectLabel:"Select a Debug Action:",buttonLabel:"Run Action",alertWarning:"Before you run any action, please make sure that you have fully read the description and understand the consequences as these cannot be reverted.",cannotBeUndone:"This action cannot be undone.",yesDoAction:"Yes, run this action",noChangedMind:"No, I changed my mind"},alertLink:W.getPlainLink("Click here to open to the Scheduled Actions panel",this.rootStore.aioseo.urls.admin.scheduledActions,!0)}},computed:{areYouSureTitle(){return this.currentAction.slug==="rerun-addon-migrations"?k('Are you sure you want to run the "%1$s" action for the following addons?<div class="selected-addons-list">%2$s</div>',this.currentAction.label,`<ul>${this.selectedAddonsNames.map(e=>`<li>${e}</li>`).join("")}</ul>`):`Are you sure you want to run the "${this.currentAction.label}" action?`},tabs(){const e=k('<a href="%1$s" target="_blank">Scheduled Actions</a>',this.rootStore.aioseo.urls.admin.scheduledActions),o=this.rootStore.aioseo.data.isNetworkAdmin?"<br><strong>NOTE: If no site is selected, this will clear the network cache.</strong>":"",s=this.rootStore.aioseo.data.isNetworkAdmin?"<br><strong>NOTE: If no site is selected, this will clear the network plugin updates transient.</strong>":"";return[{slug:"general",name:"General",actions:[{label:"Clear Cache",slug:"clear-cache",shortDescription:`This action deletes all records of the <code>aioseo_cache</code> table in the database.${o}`,longDescription:"",showModal:!1,network:!0},{label:"Clear Plugin Updates Transient",slug:"clear-plugin-updates-transient",shortDescription:`This action clears the plugin updates transient, which forces WordPress Core to check for plugin updates.${s}`,longDescription:"",showModal:!1,network:!0},{label:"Readd Capabilities",slug:"readd-capabilities",shortDescription:"This action will readd our capabilities (access permissions) for all users.",longDescription:"",showModal:!1},{label:"Reset Data",slug:"reset-data",shortDescription:"This action will <strong>delete</strong> all our custom tables and options.",longDescription:"",showModal:!0}]},{slug:"sitemap",name:"Sitemap",actions:[{label:"Clear Image Data",slug:"clear-image-data",shortDescription:"This action removes all image data from the database, forcing a site-wide rescan via Action Scheduler.",longDescription:k("To speed up the image scan, go to %1$s and run the <code>aioseo_image_sitemap_scan</code> action.",e),showModal:!1}]},{slug:"migrations",name:"Migrations",actions:[{label:"Rerun V4+ Migrations",slug:"rerun-migrations",shortDescription:"This action will rerun all update migrations since 4.0.0, excluding the V3 migration.",longDescription:"",showModal:!0},{label:"Rerun Migrations for Active Addons",slug:"rerun-addon-migrations",shortDescription:"This action will rerun all update migrations for the selected addons.",longDescription:"",showModal:!0,component:"addons-list"}]},{slug:"old-issues",name:"Old Issues",actions:[{label:"Remove Duplicates",slug:"remove-duplicates",shortDescription:"This action will delete any duplicate records that are found in the <code>aioseo_posts</code> and <code>aioseo_terms</code> tables.",longDescription:"",showModal:!1},{label:"Unescape Data",slug:"unescape-data",shortDescription:"This action will clean <code>aioseo_posts</code> and <code>aioseo_term</code> records whose data is corrupted.",longDescription:k("The action will trigger a routine which runs in batches via Action Scheduler. It may take some time for this routine to complete, To speed up this process, go to %1$s and run the <code>aioseo_unslash_escaped_data_posts</code> or <code>aioseo_unslash_escaped_data_terms</code> action.",e),showModal:!1}]},{slug:"deprecated-options",name:"Deprecated Options",actions:[{label:"Deprecated Options",slug:"deprecated-options",shortDescription:"Enable or disable any options that have been deprecated in AIOSEO.",longDescription:"<strong>These options are not guaranteed to work and all support has been dropped.</strong>",showModal:!1,component:"deprecated-options"}]},{slug:"writing-assistant",name:"Writing Assistant",actions:[{label:"Writing Assistant",slug:"writing-assistant",shortDescription:"Resets all users SEOBoost logins.",longDescription:"",showModal:!1,component:"writing-assistant"}]}]},activeTabObject(){return this.tabs.find(e=>e.slug===this.activeTab)}},methods:{isActionDisabled(e){return this.rootStore.aioseo.data.isNetworkAdmin?this.site.blog_id?this.site.blog_id==="network"&&e.network?!1:this.site.blog_id==="network"&&!e.network:!0:!1},isLoading(e){return!!this.doingAction[e.slug]},getSelectedActionObject(e){let o=null;return this.actions.forEach(s=>{const c=s.options.find(t=>t.value===e);c&&(o=c)}),o},maybeDoAction(e,o){if(this.currentAction=e,this.currentData=o,e.showModal){this.showAreYouSureModal=!0;return}this.doAction(o)},doAction(e){this.doingAction[this.currentAction.slug]=!0,this.showAreYouSureModal=!1,this.doingActionKey++,this.toolsStore.doTask({action:this.currentAction.slug,siteId:this.site.blog_id||this.rootStore.aioseo.data.currentBlogId,data:e}).then(()=>{console.log(`Action "${this.currentAction.label}" has been completed.`)}).catch(o=>{console.error(`Action "${this.currentAction.label}" could not be completed: `,o)}).finally(()=>{this.doingAction[this.currentAction.slug]=!1,this.doingActionKey++})}},beforeMount(){var o;let e=-1;if(this.rootStore.aioseo.data.v3Options&&(e=this.tabs.findIndex(s=>s.slug.toLowerCase()==="migrations"),e!==-1)){const s=k('<a href="%1$s" target="_blank">Scheduled Actions</a>',this.rootStore.aioseo.urls.admin.scheduledActions);this.tabs[e].actions.push({label:"Rerun V3 Migration",slug:"restart-v3-migration",shortDescription:"This action restarts the migration from V3 to V4.",longDescription:k("All settings will be migrated immediately. However, the post/term meta needs to be migrated via a routine which runs in batches via Action Scheduler. To speed up the post/term meta migration, go to %1$s and run the <code>aioseo_migrate_post_meta</code> or <code>aioseo_migrate_term_meta</code> action.",s),infoComponent:"MigrationInfo",showModal:!0})}(o=this.extraActions)!=null&&o.length&&this.extraActions.forEach(s=>{if(e=this.tabs.findIndex(c=>c.slug.toLowerCase()===s.slug.toLowerCase()),e!==-1){this.tabs[e].actions=this.tabs[e].actions.concat(s.actions);return}this.tabs.push(s)})}},Oe={class:"aioseo-tools-debug"},Ne={key:0,class:"aioseo-settings-row"},Be={class:"select-site"},Re=["innerHTML"],Ve=["innerHTML"],$e=["innerHTML"],Ee={class:"aioseo-modal-body"},Ie=["innerHTML"],Ue=["innerHTML"];function He(e,o,s,c,t,i){const d=a("core-network-site-selector"),_=a("core-alert"),h=a("core-main-tabs"),v=a("base-button"),f=a("core-settings-row"),L=a("svg-close"),x=a("core-modal"),E=a("core-card");return n(),l("div",Oe,[m(E,{slug:"debug","header-text":t.strings.cardLabel},{default:u(()=>[c.rootStore.aioseo.data.isNetworkAdmin?(n(),l("div",Ne,[p("div",Be,g(t.strings.selectSite),1),m(d,{onSelectedSite:o[0]||(o[0]=r=>t.site=r),"show-network":""})])):C("",!0),m(_,{type:"yellow"},{default:u(()=>[p("div",null,g(t.strings.alertWarning),1),p("div",{innerHTML:t.alertLink},null,8,Re)]),_:1}),(n(),b(h,{internal:"",key:t.tabsKey,tabs:i.tabs,active:t.activeTab,showSaveButton:!1,onChanged:o[1]||(o[1]=r=>t.activeTab=r)},null,8,["tabs","active"])),(n(!0),l(S,null,T(i.activeTabObject.actions,(r,I)=>(n(),b(f,{key:t.activeTab+I,name:r.label,align:""},{content:u(()=>[r.component?(n(),b(N(r.component),{key:0,onUpdate:D=>i.maybeDoAction(r,D),onAddonsSelected:o[2]||(o[2]=D=>t.selectedAddonsNames=D),loading:t.doingAction[r.slug],disabled:i.isActionDisabled(r)},null,40,["onUpdate","loading","disabled"])):(n(),b(v,{type:"blue",size:"medium",onClick:D=>i.maybeDoAction(r),loading:t.doingAction[r.slug],key:t.doingActionKey,disabled:i.isActionDisabled(r)},{default:u(()=>[w(g(t.strings.buttonLabel),1)]),_:2},1032,["onClick","loading","disabled"])),p("div",{class:"aioseo-description",innerHTML:r.shortDescription},null,8,Ve),p("div",{class:"aioseo-description",innerHTML:r.longDescription},null,8,$e),r.infoComponent?(n(),b(N(r.infoComponent),{key:2})):C("",!0)]),_:2},1032,["name"]))),128)),m(x,{show:t.showAreYouSureModal,"no-header":"",onClose:o[7]||(o[7]=r=>t.showAreYouSureModal=!1),classes:["aioseo-debug-modal"]},{body:u(()=>[p("div",Ee,[p("button",{class:"close",onClick:o[4]||(o[4]=te(r=>t.showAreYouSureModal=!1,["stop"]))},[m(L,{onClick:o[3]||(o[3]=r=>t.showAreYouSureModal=!1)})]),p("h3",{innerHTML:i.areYouSureTitle},null,8,Ie),p("div",{class:"description",innerHTML:t.strings.cannotBeUndone},null,8,Ue),m(v,{type:"blue",size:"medium",onClick:o[5]||(o[5]=r=>i.doAction(t.currentData))},{default:u(()=>[w(g(t.strings.yesDoAction),1)]),_:1}),m(v,{type:"gray",size:"medium",onClick:o[6]||(o[6]=r=>t.showAreYouSureModal=!1)},{default:u(()=>[w(g(t.strings.noChangedMind),1)]),_:1})])]),_:1},8,["show"])]),_:1},8,["header-text"])])}const Ye=y(xe,[["render",He]]),We={components:{Debug:Ye}};function ze(e,o,s,c,t,i){const d=a("debug",!0);return n(),b(d)}const Ke=y(We,[["render",ze]]),_o={__name:"Main",setup(e){const o=M(),s=U(),c=B(()=>{switch(s.name){case"database-tools":return K;case"debug":return Ke;case"htaccess-editor":return oe;case"import-export":return se;case"system-status":return ie;case"wp-code":return re;default:return ne}});ae();const t="all-in-one-seo-pack",i=B(()=>s.name!=="system-status"&&s.name!=="import-export"&&s.name!=="database-tools"&&s.name!=="debug"&&s.name!=="wp-code"),d={pageName:o.aioseo.data.isNetworkAdmin?A("Network Tools",t):A("Tools",t)};return(_,h)=>(n(),b(O(z),{"page-name":d.pageName,"show-save-button":i.value},{default:u(()=>[(n(),b(N(c.value)))]),_:1},8,["page-name","show-save-button"]))}};export{_o as default};
