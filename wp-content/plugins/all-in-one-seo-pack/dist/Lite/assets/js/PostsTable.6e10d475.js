import{a as J}from"./runtime-dom.esm-bundler.dc49ee3e.js";import{j as E,i as K,b as Q,e as X,a as $,k as ee}from"./index.4b887428.js";import{u as te}from"./PostTypes.4e006733.js";import{a as se,S as oe,c as ie}from"./Statistic.2ff4c4cd.js";import{u as re}from"./WpTable.f051f458.js";import{l as ae}from"./license.388ee2cc.js";import{n as M}from"./numbers.cdba2587.js";import{_ as ne}from"./ScoreButton.a94ce559.js";import{C as le}from"./Table.5d523def.js";import{C as ce}from"./Index.72794c8a.js";import{D as B}from"./datetime.f197aeae.js";import{q as ue}from"./vue3-apexcharts.d821ad9d.js";import"./translations.e71e2202.js";import{_ as R}from"./_plugin-vue_export-helper.eefbdd86.js";import{_ as n,a as j}from"./default-i18n.65d58dd6.js";import{a6 as w,o as a,c as d,l as P,$ as p,a4 as _,W as A,F as de,af as pe,_ as h,a1 as g,a5 as he,ae as N,R as x,a7 as C,a2 as c,Y as U}from"./runtime-core.esm-bundler.ce5add0b.js";import{_ as fe}from"./IndexStatus.db5cd060.js";import{C as ge}from"./Button.9a301412.js";import{C as me}from"./Tooltip.23c7170d.js";import{u as Se}from"./IndexStatus.4cfebbbc.js";import{S as _e}from"./External.5f8a6285.js";import{S as be}from"./CheckSolid.5be77a11.js";import{S as ye}from"./ExclamationSolid.37801e1b.js";const O="all-in-one-seo-pack",xe={components:{apexchart:ue},props:{points:{type:Object,required:!0},peak:{type:Number,default(){return 0}},recovering:{type:Boolean,default(){return!1}},height:{type:Number,default(){return 50}}},data(){return{strings:{recovering:n("Slowly Recovering",O),peak:n("Peak",O)}}},computed:{getSeries(){const t=this.points,o=[];return Object.keys(t).forEach(r=>{o.push({x:r,y:t[r]})}),[{data:o}]},chartOptions(){const t=this.peak;return{colors:[function({value:o}){return o===t?"#005AE0":"#99C2FF"}],chart:{type:"bar",sparkline:{enabled:!0},zoom:{enabled:!1},toolbar:{show:!1},parentHeightOffset:0,background:"#fff"},grid:{show:!1,padding:{top:2,right:2,bottom:0,left:2}},plotOptions:{bar:{columnWidth:"85%",barHeight:"100%"}},fill:{type:"solid"},tooltip:{enabled:!0,x:{show:!0,formatter:o=>B.fromFormat(o,"yyyy-MM").setZone(B.zone).toLocaleString({month:"long",year:"numeric"})},y:{formatter:o=>{const r=j(n("%1$s points",O),M.numberFormat(o,0));let e="";return o===t&&(e=`<span class="peak">${this.strings.peak}</span>`),r+e}},marker:{show:!1}}}}}},ke={class:"aioseo-graph-decay"},we={key:0,class:"aioseo-graph-decay-recovering"};function Pe(t,o,r,e,i,l){const f=w("apexchart");return a(),d("div",ke,[P(f,{width:"100%",height:r.height,ref:"apexchart",options:l.chartOptions,series:l.getSeries,class:"aioseo-graph-decay-chart"},null,8,["height","options","series"]),r.recovering?(a(),d("div",we,p(i.strings.recovering),1)):_("",!0)])}const Ce=R(xe,[["render",Pe]]),ve={class:"aioseo-index-status-result"},Fe={key:0},Te={class:"aioseo-index-status-result__row-title"},Le=["innerHTML"],Re={key:0,class:"aioseo-index-status-result__row"},Ie=["href"],Oe={key:1},Ae={__name:"IndexStatusResult",props:{result:{type:Object,default(){return{}}},errorMessage:{type:String,default:""}},setup(t){const o="aioseo-pro",r=t,{items:e,strings:i}=Se(),l=A(()=>r.errorMessage?r.errorMessage:n("Oops! It looks like something went wrong while loading the results for this page. Please try again by refreshing the page.",o));return(f,m)=>{var b,k,y;return a(),d("div",ve,[(k=(b=t.result)==null?void 0:b.indexStatusResult)!=null&&k.verdict?(a(),d("div",Fe,[(a(!0),d(de,null,pe(x(e),(S,v)=>(a(),d("div",{class:"aioseo-index-status-result__row",key:v},[h("div",Te,p(S.title),1),h("div",{class:N(["aioseo-index-status-result__row-description",S.key])},[(a(),g(he(S.getIcon(t.result.indexStatusResult[S.key])))),h("span",{innerHTML:S.parseValue(t.result.indexStatusResult[S.key]).value},null,8,Le)],2)]))),128)),(y=t.result)!=null&&y.inspectionResultLink?(a(),d("div",Re,[h("a",{href:t.result.inspectionResultLink,target:"_blank",class:"aioseo-index-status-result__row-inspection-link"},[C(p(x(i).inspectOnGsc)+" ",1),P(x(_e),{width:"12",height:"12"})],8,Ie)])):_("",!0)])):(a(),d("div",Oe,p(l.value),1))])}}},je={},De={viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",class:"aioseo-circle-close-solid"},Be=h("path",{d:"M8.4748 17.0008L11.9998 13.4758L15.5248 17.0008L16.9998 15.5258L13.4748 12.0008L16.9998 8.47578L15.5248 7.00078L11.9998 10.5258L8.4748 7.00078L6.9998 8.47578L10.5248 12.0008L6.9998 15.5258L8.4748 17.0008ZM11.9998 22.2008C10.5831 22.2008 9.2538 21.9341 8.0118 21.4008C6.77047 20.8674 5.69147 20.1424 4.7748 19.2258C3.85814 18.3091 3.13314 17.2301 2.5998 15.9888C2.06647 14.7468 1.7998 13.4174 1.7998 12.0008C1.7998 10.5841 2.06647 9.25478 2.5998 8.01278C3.13314 6.77145 3.85814 5.69245 4.7748 4.77578C5.69147 3.85911 6.77047 3.13411 8.0118 2.60078C9.2538 2.06745 10.5831 1.80078 11.9998 1.80078C13.4165 1.80078 14.7458 2.06745 15.9878 2.60078C17.2291 3.13411 18.3081 3.85911 19.2248 4.77578C20.1415 5.69245 20.8665 6.77145 21.3998 8.01278C21.9331 9.25478 22.1998 10.5841 22.1998 12.0008C22.1998 13.4174 21.9331 14.7468 21.3998 15.9888C20.8665 17.2301 20.1415 18.3091 19.2248 19.2258C18.3081 20.1424 17.2291 20.8674 15.9878 21.4008C14.7458 21.9341 13.4165 22.2008 11.9998 22.2008Z"},null,-1),Ue=[Be];function Ee(t,o){return a(),d("svg",De,Ue)}const Me=R(je,[["render",Ee]]),Ne={__name:"IndexStatus",props:{loading:{type:Boolean,default:!1},result:{type:Object,default(){return{}}},tooltipOffset:{type:String,default(){return"0,0"}},viewable:{type:Boolean,default:!0}},setup(t){const o=E(),r="all-in-one-seo-pack",e=t,i=A(()=>{var f,m,b,k;if(!e.viewable||!((m=(f=e.result)==null?void 0:f.indexStatusResult)!=null&&m.verdict)&&o.quotaExceeded.urlInspection)return"exclamation";switch((k=(b=e.result)==null?void 0:b.indexStatusResult)==null?void 0:k.verdict){case"PASS":return"check";case"PARTIAL":case"FAIL":case"NEUTRAL":return"close";case"VERDICT_UNSPECIFIED":default:return"exclamation"}}),l=A(()=>e.viewable?o.quotaExceeded.urlInspection?n("Your site ran out of URL inspection quota. Please try again after 24 hours when the quota is renewed.",r):"":j(n("This page is not published so its index status cannot be determined. %1$s will determine the index status as soon as the page is published.",r),"AIOSEO"));return(f,m)=>(a(),d("div",{class:N(["aioseo-index-status",[t.viewable?"aioseo-index-status--viewable":"aioseo-index-status--not-viewable",x(o).quotaExceeded.urlInspection?"aioseo-index-status--quota-exceeded":""]])},[t.loading?(a(),g(x(ge),{key:0,dark:""})):_("",!0),t.loading?_("",!0):(a(),g(x(me),{key:1,flip:"",offset:t.tooltipOffset},{tooltip:c(()=>[P(x(Ae),{result:t.result,"error-message":l.value},null,8,["result","error-message"])]),default:c(()=>[h("div",null,[i.value==="check"?(a(),g(x(be),{key:0})):i.value==="close"?(a(),g(x(Me),{key:1})):(a(),g(x(ye),{key:2}))])]),_:1},8,["offset"]))],2))}},qe={};function Ve(t,o){return a(),d("div")}const He=R(qe,[["render",Ve]]),u="all-in-one-seo-pack",We={setup(t){const{editPost:o,viewPost:r}=te(),e=E(),i=({name:T,selectedValue:Y})=>{m[T]=Y},l=()=>{m.value.postType="",i({name:"postType",selectedValue:""})},f=T=>{if(typeof e[t.updateAction]=="function")return e[t.updateAction](T)},m=U({}),b=U(!1),{openPostDetail:k,orderBy:y,orderDir:S,processFilter:v,resultsPerPage:I}=se({processFilterTable:T=>H(T),showUpsell:b}),s="searchStatisticsSeoStatistics",F="aioseo-search-statistics-post-table",{filter:L,pageNumber:D,processAdditionalFilters:q,processChangeItemsPerPage:V,processFilterTable:H,processPagination:W,processSearch:Z,processSort:z,searchTerm:G}=re({changeItemsPerPageSlug:s,fetchData:f,orderBy:y,orderDir:S,resetSelectedFilters:l,resultsPerPage:I,selectedFilters:m,tableId:F});return{changeItemsPerPageSlug:s,editPost:o,filter:L,licenseStore:K(),links:Q,openPostDetail:k,optionsStore:X(),orderBy:y,orderDir:S,pageNumber:D,processAdditionalFilterOptionSelected:i,processAdditionalFilters:q,processChangeItemsPerPage:V,processFilter:v,processPagination:W,processSearch:Z,processSort:z,rootStore:$(),searchStatisticsStore:e,searchTerm:G,selectedFilters:m,settingsStore:ee(),showUpsell:b,tableId:F,viewPost:r}},components:{CoreScoreButton:ne,CoreWpTable:le,Cta:ce,GraphDecay:Ce,IndexStatus:fe,IndexStatusPro:Ne,ObjectActions:He,Statistic:oe},props:{posts:Object,isLoading:Boolean,showHeader:{type:Boolean,default(){return!0}},showTableFooter:Boolean,showItemsPerPage:Boolean,columns:{type:Array,default(){return["postTitle","seoScore","clicks","impressions","position"]}},appendColumns:{type:Object,default(){return{}}},defaultSorting:{type:Object,default(){return{}}},initialFilter:{type:String,default(){return""}},updateAction:{type:String,default(){return"updateSeoStatistics"}}},data(){return{numbers:M,sortableColumns:[],strings:{position:n("Position",u),ctaButtonText:n("Unlock Post Tracking",u),ctaHeader:j(n("Post Tracking is a %1$s Feature",u),"PRO")},license:ae}},watch:{isLoading(t){t||this.$nextTick(()=>{this.loadInspectionResult()})}},computed:{getFilters(){return this.searchStatisticsStore.shouldShowSampleReports?[]:this.posts.filters},allColumns(){var r,e;const t=ie(this.columns),o=((e=(r=this.posts)==null?void 0:r.filters)==null?void 0:e.find(i=>i.active))||{};return this.appendColumns[o.slug||"all"]&&t.push(this.appendColumns[o.slug||"all"]),t.map(i=>(i.endsWith("Sortable")&&(i=i.replace("Sortable",""),this.sortableColumns.push(i)),i))},tableColumns(){return[{slug:"row",label:"#",width:"40px"},{slug:"postTitle",label:n("Title",u),width:"100%"},{slug:"seoScore",label:n("TruSEO Score",u),width:"130px"},{slug:"indexStatus",label:n("Indexed",u),width:"80px",coreFeature:"index-status"},{slug:"clicks",label:n("Clicks",u),width:"80px"},{slug:"impressions",label:n("Impressions",u),width:"110px"},{slug:"position",label:n("Position",u),width:"90px"},{slug:"lastUpdated",label:n("Last Updated On",u),width:"160px"},{slug:"decay",label:n("Loss",u),width:"140px"},{slug:"decayPercent",label:n("Drop (%)",u),width:"120px"},{slug:"performance",label:n("Performance Score",u),width:"150px"},{slug:"diffDecay",label:n("Diff",u),width:"95px"},{slug:"diffPosition",label:n("Diff",u),width:"80px"}].filter(t=>t.coreFeature&&((!this.rootStore.isPro||this.licenseStore.isUnlicensed)&&!this.searchStatisticsStore.shouldShowSampleReports||!this.license.hasCoreFeature("search-statistics",t.coreFeature)&&!this.searchStatisticsStore.shouldShowSampleReports)?!1:t.slug==="seoScore"?this.optionsStore.options.advanced.truSeo:this.allColumns.includes(t.slug)).map(t=>(t.sortable=this.isSortable&&this.sortableColumns.includes(t.slug),t.sortable&&(t.sortDir=t.slug===this.orderBy?this.orderDir:"asc",t.sorted=t.slug===this.orderBy),t))},isSortable(){return this.filter==="all"&&this.rootStore.isPro&&!this.licenseStore.isUnlicensed}},methods:{loadInspectionResult(){var r;if(!((r=this.posts)!=null&&r.rows)||this.searchStatisticsStore.quotaExceeded.urlInspection)return;const t=Object.values(this.posts.rows),o=t.filter(e=>{var i;return!e.inspectionResult||((i=e.inspectionResult)==null?void 0:i.length)===0});o.length&&(o.forEach(e=>{const i=t.find(l=>l.page===e.page);i&&(i.inspectionResultLoading=!0)}),this.searchStatisticsStore.getInspectionResult({paths:o.map(e=>e.page)}).then(e=>{o.forEach(i=>{const l=t.find(f=>f.page===i.page);l&&(l.inspectionResult=e[i.page],l.inspectionResultLoading=!1)})}))}},mounted(){var t,o;this.initialFilter&&this.processFilter({slug:this.initialFilter}),this.loadInspectionResult(),this.orderBy=((t=this.defaultSorting)==null?void 0:t.orderBy)||this.orderBy,this.orderDir=((o=this.defaultSorting)==null?void 0:o.orderDir)||this.orderDir}},Ze={class:"aioseo-search-statistics-post-table"},ze={class:"object-row"},Ge={class:"object-title"},Ye=["onClick"],Je={key:1,class:"object-title"},Ke={key:0,class:"row-actions"},Qe=["href"],Xe=["href"];function $e(t,o,r,e,i,l){const f=w("object-actions"),m=w("core-score-button"),b=w("index-status"),k=w("index-status-pro"),y=w("statistic"),S=w("graph-decay"),v=w("cta"),I=w("core-wp-table");return a(),d("div",Ze,[P(I,{ref:"table",class:"posts-table",id:e.tableId,columns:l.tableColumns,rows:Object.values(r.posts.rows),totals:r.posts.totals,filters:l.getFilters,"additional-filters":r.posts.additionalFilters,"selected-filters":e.selectedFilters,loading:r.isLoading,"initial-page-number":e.pageNumber,"initial-search-term":e.searchTerm,"initial-items-per-page":e.settingsStore.settings.tablePagination[e.changeItemsPerPageSlug],"show-header":r.showHeader,"show-bulk-actions":!1,"show-table-footer":r.showTableFooter,"show-items-per-page":r.showItemsPerPage&&!e.searchStatisticsStore.shouldShowSampleReports,"show-pagination":"","blur-rows":e.showUpsell,onFilterTable:e.processFilter,onProcessAdditionalFilters:e.processAdditionalFilters,onAdditionalFilterOptionSelected:e.processAdditionalFilterOptionSelected,onPaginate:e.processPagination,onProcessChangeItemsPerPage:e.processChangeItemsPerPage,onSearch:e.processSearch,onSortColumn:e.processSort},{row:c(({index:s})=>[h("div",ze,p(s+1),1)]),postTitle:c(({row:s})=>{var F,L;return[h("div",Ge,[s.objectId&&s.objectType==="post"&&e.searchStatisticsStore.isConnected?(a(),d("a",{key:0,href:"#",onClick:J(D=>e.openPostDetail(s),["prevent"])},p(s.objectTitle),9,Ye)):(a(),d("span",Je,p(s.objectTitle),1))]),P(f,{row:s},null,8,["row"]),s.objectId&&s.objectType==="post"?(a(),d("div",Ke,[h("span",null,[h("a",{class:"view",href:s.context.permalink,target:"_blank"},[h("span",null,p(e.viewPost((F=s.context.postType)==null?void 0:F.singular)),1)],8,Qe),C(" | ")]),h("span",null,[h("a",{class:"edit",href:s.context.editLink,target:"_blank"},[h("span",null,p(e.editPost((L=s.context.postType)==null?void 0:L.singular)),1)],8,Xe)])])):_("",!0)]}),seoScore:c(({row:s})=>[s.seoScore?(a(),g(m,{key:0,class:"table-score-button",score:s.seoScore},null,8,["score"])):_("",!0)]),indexStatus:c(({row:s})=>[e.searchStatisticsStore.shouldShowSampleReports?_("",!0):(a(),g(b,{key:0,result:s.inspectionResult,loading:s.inspectionResultLoading},null,8,["result","loading"])),e.searchStatisticsStore.shouldShowSampleReports?(a(),g(k,{key:1,result:s.inspectionResult,loading:s.inspectionResultLoading},null,8,["result","loading"])):_("",!0)]),clicks:c(({row:s})=>[C(p(i.numbers.compactNumber(s.clicks)),1)]),impressions:c(({row:s})=>[C(p(i.numbers.compactNumber(s.impressions)),1)]),position:c(({row:s})=>[C(p(Math.round(s.position).toFixed(0)),1)]),lastUpdated:c(({row:s})=>[C(p(s.context.lastUpdated||"-"),1)]),decay:c(({row:s})=>[P(y,{type:"decay","show-difference":!1,total:s.decay,showZeroValues:!0,class:"no-margin"},null,8,["total"])]),decayPercent:c(({row:s})=>[P(y,{type:"decayPercent","show-difference":!1,total:s.decayPercent,showZeroValues:!0,class:"no-margin"},null,8,["total"])]),performance:c(({row:s})=>[P(S,{points:s.points,peak:s.peak,recovering:s.recovering,height:38},null,8,["points","peak","recovering"])]),diffPosition:c(({row:s})=>[s.difference.comparison?(a(),g(y,{key:0,type:"position","show-original":!1,difference:s.difference.position,"tooltip-offset":"-100px,0"},null,8,["difference"])):_("",!0)]),diffDecay:c(({row:s})=>[s.difference.comparison?(a(),g(y,{key:0,type:"diffDecay","show-original":!1,difference:s.difference.decay,"tooltip-offset":"-100px,0"},null,8,["difference"])):_("",!0)]),cta:c(()=>[e.showUpsell?(a(),g(v,{key:0,"cta-link":e.links.getPricingUrl("search-statistics","search-statistics-upsell",null,e.rootStore.isPro?"pricing":"liteUpgrade"),"button-text":i.strings.ctaButtonText,"learn-more-link":e.links.getUpsellUrl("search-statistics","search-statistics-upsell",e.rootStore.isPro?"pricing":"liteUpgrade"),"hide-bonus":!e.licenseStore.isUnlicensed},{"header-text":c(()=>[C(p(i.strings.ctaHeader),1)]),_:1},8,["cta-link","button-text","learn-more-link","hide-bonus"])):_("",!0)]),_:1},8,["id","columns","rows","totals","filters","additional-filters","selected-filters","loading","initial-page-number","initial-search-term","initial-items-per-page","show-header","show-table-footer","show-items-per-page","blur-rows","onFilterTable","onProcessAdditionalFilters","onAdditionalFilterOptionSelected","onPaginate","onProcessChangeItemsPerPage","onSearch","onSortColumn"])])}const wt=R(We,[["render",$e]]);export{wt as P};
