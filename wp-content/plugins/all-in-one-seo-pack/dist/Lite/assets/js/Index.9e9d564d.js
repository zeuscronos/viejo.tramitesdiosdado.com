import{R as y,a as E,b as T}from"./constants.bc5863fe.js";import{a as G,b as q,w as Z,m as X,z as J,n as x}from"./index.4b887428.js";import{u as $}from"./JsonValues.a0694556.js";import{C as ee,a as te,S as re,u as se}from"./Index.778efbec.js";import{u as le}from"./Url.9f0afcb2.js";import{_ as F}from"./Button.9a301412.js";import{B as W}from"./Select.f950b4c6.js";import{C as Q}from"./Index.2a391835.js";import{a as ae}from"./date.f7db1924.js";import{D as O}from"./datetime.f197aeae.js";import{B as ie}from"./DatePicker.36e9e18f.js";import{B as oe}from"./Input.f04bee4d.js";import{C as Y}from"./Tooltip.23c7170d.js";import{S as j,_ as ue}from"./Trash.87a7d946.js";import{S as ne}from"./Plus.c9b03af8.js";import"./translations.e71e2202.js";import{_ as K}from"./_plugin-vue_export-helper.eefbdd86.js";import{_ as i,a as L}from"./default-i18n.65d58dd6.js";import{a6 as m,o as n,c as R,_ as o,$ as p,l as h,a2 as _,a7 as b,F as V,af as N,ae as I,a1 as U,a4 as v,ao as de}from"./runtime-core.esm-bundler.ce5add0b.js";import{T as ce}from"./Slide.3003ef51.js";import{a as ge}from"./runtime-dom.esm-bundler.dc49ee3e.js";const g="all-in-one-seo-pack",he={type:null,key:null,value:null,regex:null},me={emits:["redirects-custom-rule-error"],setup(){return{dateStringToLocalJs:ae,rootStore:G()}},components:{BaseButton:F,BaseDatePicker:ie,BaseInput:oe,BaseSelect:W,CoreAlert:Q,CoreTooltip:Y,SvgCircleQuestionMark:j,SvgCirclePlus:ne,SvgTrash:ue},props:{editCustomRules:Array},data(){return{DateTime:O,strings:{customRules:i("Custom Rules",g),customRulesTooltip:i("Custom rules allow you to create redirects based on specific criteria. You can use these rules to redirect users based on their IP address, browser, or other criteria.",g),selectMatchRule:i("Select Rule",g),delete:i("Delete",g),add:i("Add Custom Rule",g),regex:i("Regex",g),selectAValue:i("Select a Value or Add a New One",g),key:i("Key",g),value:i("Value",g),startDate:i("Start Date",g),endDate:i("End Date",g)},customRules:[],rulesErrors:[],types:[{label:y.schedule,value:"schedule",taggable:!1,regex:!1,dateRange:!0},{label:y.login,value:"login",placeholder:i("Select Status",g),singleRule:!0,options:[{label:y.loggedin,value:"loggedin"},{label:y.loggedout,value:"loggedout"}]},{label:y.role,value:"role",multiple:!0,placeholder:i("Select Roles",g),options:Object.entries(this.rootStore.aioseo.user.userRoles).map(e=>({label:e[1],value:e[0]}))},{label:y.referrer,value:"referrer",regex:!0,singleRule:!0},{label:y.agent,value:"agent",regex:!0,taggable:!0,multiple:!0,options:[{label:y.mobile,value:"mobile",docLink:q.getDocLink(i("Learn more",g),"redirectCustomRulesUserAgent",!0)},{label:y.feeds,value:"feeds",docLink:q.getDocLink(i("Learn more",g),"redirectCustomRulesUserAgent",!0)},{label:y.libraries,value:"libraries",docLink:q.getDocLink(i("Learn more",g),"redirectCustomRulesUserAgent",!0)}]},{label:y.cookie,value:"cookie",keyValuePair:!0,regex:!0},{label:y.ip,value:"ip",placeholder:i("Enter an IP Address",g),taggable:!0,regex:!0,singleRule:!0},{label:y.server,value:"server",placeholder:i("Enter the Server Name",g),regex:!0,singleRule:!0},{label:y.header,value:"header",keyValuePair:!0,regex:!0},{label:y.wp_filter,value:"wp_filter",placeholder:i("Enter a WordPress Filter Name",g),taggable:!0},{label:y.locale,value:"locale",taggable:!0,regex:!0,placeholder:i("Enter a Locale Code, e.g.: en_GB, es_ES",g),singleRule:!0}]}},watch:{customRules:{deep:!0,handler(){this.validationError()}}},computed:{hasCustomRules(){return 0<this.customRules.length},filteredTypes(){return this.types.map(e=>({...e,$isDisabled:e.singleRule&&this.customRules.find(t=>e.value===t.type)}))}},methods:{isDisabledStartDate(e){const t=new Date;return t.setHours(0,0,0,0),e<t},isDisabledEndDate(e,t){const l=this.getRuleValue("scheduleStart",t);return l?(e.setHours(23,59,59,0),this.dateStringToLocalJs(l)>e):this.isDisabledStartDate(e)},removeRule(e){this.customRules.splice(e,1),this.hasCustomRules||this.addRule(null)},addRule(e,t=!1){e||(e=JSON.parse(JSON.stringify(he))),(!t||t&&this.customRules.filter(l=>l===e).length===0)&&this.customRules.push(e)},updateRule(e,t,l){const u=this.customRules[l];t=typeof t.value<"u"?t.value:t,t=typeof t=="object"&&t.length?t.map(s=>s.value):t,u[e]=t,e==="type"&&(u.value=""),this.customRules[l]=u},getRuleValue(e,t,l=!1){if(!this.customRules[t])return;let s=this.customRules[t][e],r=null;if(l)return s;switch(e){case"type":s=this.types.find(c=>s===c.value);break;case"value":r=this.getType(t,"options"),r&&(typeof s=="object"?s=s.map(c=>r.find(D=>c===D.value)||c).filter(c=>!!c):s=r.find(c=>s===c.value)||s),this.getType(t,"taggable")&&(s=typeof s=="object"?s.map(c=>typeof c.label>"u"?{label:c,value:c}:c):[]);break}return s},getType(e,t){const l=this.getRuleValue("type",e);return t?l&&typeof l[t]<"u"?l[t]:!1:l},validationError(){let e=!1,t=null,l=null;this.customRules.forEach((u,s)=>{switch(this.rulesErrors[s]=null,u.type){case"schedule":t=this.getRuleValue("scheduleStart",s),l=this.getRuleValue("scheduleEnd",s),t&&l&&(t>l&&(this.rulesErrors[s]=i("The Start Date must be lower than the End Date.",g),e=!0),t===l&&(this.rulesErrors[s]=i("Start Date and End Date must be different.",g),e=!0));break}}),this.$emit("redirects-custom-rule-error",e)},updateDate(e,t,l){const u=e!==null?O.fromJSDate(e).toUTC().toString():"";this.updateRule(t,u,l)}},mounted(){this.editCustomRules&&(this.customRules=this.editCustomRules),this.hasCustomRules||this.addRule(null)}},pe={class:"custom-rules"},_e={class:"redirects-options-table",cellspacing:"0",cellpadding:"0","aria-label":"Custom Rules"},fe={colspan:"2"},ye={class:"custom-rules__label"},Re={class:"rule-settings"},ve={class:"rule-row"},Ue={class:"rule-option"},be={key:3,class:"date-range"},Se={key:0,class:"rule-error"},Te={class:"actions"},De={colspan:"2"};function ke(e,t,l,u,s,r){const c=m("svg-circle-question-mark"),D=m("core-tooltip"),k=m("base-select"),C=m("base-input"),P=m("base-date-picker"),w=m("base-toggle"),B=m("core-alert"),A=m("svg-trash"),z=m("svg-circle-plus"),H=m("base-button");return n(),R("div",pe,[o("table",_e,[o("thead",null,[o("tr",null,[o("td",fe,[o("div",ye,[o("span",null,p(s.strings.customRules),1),h(D,{offset:"200px,0"},{tooltip:_(()=>[b(p(s.strings.customRulesTooltip),1)]),default:_(()=>[h(c)]),_:1})])])])]),o("tbody",null,[(n(!0),R(V,null,N(s.customRules,(M,a)=>{var S;return n(),R("tr",{class:I(["rule",{even:a%2===0}]),key:a},[o("td",Re,[o("div",ve,[o("div",Ue,[h(k,{options:r.filteredTypes,size:"medium",placeholder:s.strings.selectMatchRule,modelValue:r.getRuleValue("type",a),"onUpdate:modelValue":f=>r.updateRule("type",f,a)},null,8,["options","placeholder","modelValue","onUpdate:modelValue"]),r.getType(a,"options")||r.getType(a,"taggable")?(n(),U(k,{key:`rule-${a}-${((S=r.getRuleValue("type",a))==null?void 0:S.value)||"no-type"}`,options:r.getType(a,"options")||[],size:"medium",modelValue:r.getRuleValue("value",a),"onUpdate:modelValue":f=>r.updateRule("value",f,a),multiple:r.getType(a,"multiple")||r.getType(a,"taggable"),taggable:r.getType(a,"taggable"),placeholder:r.getType(a,"placeholder")||s.strings.selectAValue},null,8,["options","modelValue","onUpdate:modelValue","multiple","taggable","placeholder"])):v("",!0),r.getType(a,"keyValuePair")?(n(),U(C,{key:1,modelValue:r.getRuleValue("key",a),"onUpdate:modelValue":f=>r.updateRule("key",f,a),size:"medium",placeholder:r.getType(a,"placeholderKey")||s.strings.key},null,8,["modelValue","onUpdate:modelValue","placeholder"])):v("",!0),!r.getType(a,"options")&&!r.getType(a,"taggable")&&!r.getType(a,"dateRange")?(n(),U(C,{key:2,modelValue:r.getRuleValue("value",a),"onUpdate:modelValue":f=>r.updateRule("value",f,a),size:"medium",placeholder:r.getType(a,"placeholder")||s.strings.value,disabled:!r.getType(a)},null,8,["modelValue","onUpdate:modelValue","placeholder","disabled"])):v("",!0),r.getType(a,"dateRange")?(n(),R("div",be,[h(P,{type:"datetime",size:"large",placeholder:s.strings.startDate,dateFormat:u.rootStore.aioseo.data.dateFormat+" - "+u.rootStore.aioseo.data.timeFormat,defaultValue:u.dateStringToLocalJs(r.getRuleValue("scheduleStart",a)),onChange:f=>r.updateDate(f,"scheduleStart",a),isDisabledDate:r.isDisabledStartDate},null,8,["placeholder","dateFormat","defaultValue","onChange","isDisabledDate"]),h(P,{type:"datetime",size:"large",placeholder:s.strings.endDate,dateFormat:u.rootStore.aioseo.data.dateFormat+" - "+u.rootStore.aioseo.data.timeFormat,defaultValue:u.dateStringToLocalJs(r.getRuleValue("scheduleEnd",a)),onChange:f=>r.updateDate(f,"scheduleEnd",a),isDisabledDate:f=>r.isDisabledEndDate(f,a)},null,8,["placeholder","dateFormat","defaultValue","onChange","isDisabledDate"])])):v("",!0),r.getType(a,"regex")?(n(),U(w,{key:4,modelValue:r.getRuleValue("regex",a),"onUpdate:modelValue":f=>r.updateRule("regex",f,a)},{default:_(()=>[b(p(s.strings.regex),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])):v("",!0)]),s.rulesErrors[a]?(n(),R("div",Se,[h(B,{type:"red",size:"small"},{default:_(()=>[b(p(s.rulesErrors[a]),1)]),_:2},1024)])):v("",!0)])]),o("td",Te,[h(D,{class:"action",type:"action"},{tooltip:_(()=>[b(p(s.strings.delete),1)]),default:_(()=>[h(A,{onClick:f=>r.removeRule(a)},null,8,["onClick"])]),_:2},1024)])],2)}),128))]),o("tfoot",null,[o("tr",null,[o("td",De,[h(H,{size:"small-table",type:"black",onClick:t[0]||(t[0]=M=>r.addRule(null))},{default:_(()=>[h(z),b(" "+p(s.strings.add),1)]),_:1})])])])])])}const we=K(me,[["render",ke],["__scopeId","data-v-e545a658"]]),d="all-in-one-seo-pack",Ee={emits:["cancel","added-redirect"],setup(){const{getJsonValue:e}=$(),{redirectHasUnPublishedPost:t}=se(),{decodeUrl:l}=le();return{getJsonValue:e,redirectHasUnPublishedPost:t,decodeUrl:l,redirectsStore:Z()}},components:{BaseButton:F,BaseSelect:W,CoreAddRedirectionTargetUrl:ee,CoreAddRedirectionUrl:te,CoreAlert:Q,CustomRules:we,SvgRightArrow:re,SvgCircleQuestionMark:j,TransitionSlide:ce,CoreTooltip:Y},props:{edit:Boolean,log404:Boolean,disableSource:Boolean,url:Object,urls:Array,target:String,type:Number,query:String,slash:Boolean,case:Boolean,rules:{type:Array,default(){return[]}},postId:Number,postStatus:String},data(){return{REDIRECT_TYPES:E,genericError:!1,addingRedirect:!1,targetUrlErrors:[],targetUrlWarnings:[],customRulesError:!1,strings:{redirectType:i("Redirect Type",d),targetUrl:i("Target URL",d),targetUrlDescription:i("Enter a URL or start by typing a page or post title, slug or ID.",d),addUrl:i("Add URL",d),sourceUrlDescription:L(i("Enter a relative URL to redirect from or start by typing in page or post title, slug or ID. You can also use regex (%1$s)",d),q.getDocLink(i("what's this?",d),"redirectManagerRegex")),advancedSettings:i("Advanced Settings",d),queryParams:i("Query Parameters",d),queryParamsTooltip:i("Query parameters are the parameters that are passed to the target URL. You can ignore all parameters, ignore exact parameters, or include all parameters.",d),saveChanges:i("Save Changes",d),cancel:i("Cancel",d),genericErrorMessage:i("An error occurred while adding your redirects. Please try again later.",d),sourceUrlSetOncePublished:i("source url set once post is published",d)},sourceDisabled:!1,editing:!1,editingRedirect:{sourceUrls:[],targetUrl:null,redirectType:null,queryParam:null,customRules:[],showAdvancedSettings:!1}}},watch:{sourceUrls:{deep:!0,handler(){X(()=>this.checkForDuplicates(),500)}}},computed:{isUsingAdvancedSettings(){var e,t,l,u;return((e=this.redirectType)==null?void 0:e.value)!==((t=this.getDefaultRedirectType)==null?void 0:t.value)||((l=this.queryParam)==null?void 0:l.value)!==((u=this.getDefaultQueryParam)==null?void 0:u.value)||0<this.customRules.length&&this.customRules.some(s=>{var r;return 0<((r=s.value)==null?void 0:r.length)})},sourceUrls:{get(){return this.editing?this.editingRedirect.sourceUrls:this.redirectsStore.addNewRedirect.sourceUrls},set(e){this.editing?this.editingRedirect.sourceUrls=e:this.redirectsStore.addNewRedirect.sourceUrls=e}},targetUrl:{get(){return this.editing?this.editingRedirect.targetUrl:this.redirectsStore.addNewRedirect.targetUrl},set(e){this.editing?this.editingRedirect.targetUrl=e:this.redirectsStore.addNewRedirect.targetUrl=e}},redirectType:{get(){return this.editing?this.editingRedirect.redirectType:this.redirectsStore.addNewRedirect.redirectType},set(e){this.editing?this.editingRedirect.redirectType=e:this.redirectsStore.addNewRedirect.redirectType=e}},queryParam:{get(){return this.editing?this.editingRedirect.queryParam:this.redirectsStore.addNewRedirect.queryParam},set(e){this.editing?this.editingRedirect.queryParam=e:this.redirectsStore.addNewRedirect.queryParam=e}},customRules:{get(){return this.editing?this.editingRedirect.customRules:this.redirectsStore.addNewRedirect.customRules},set(e){this.editing?this.editingRedirect.customRules=e:this.redirectsStore.addNewRedirect.customRules=e}},showAdvancedSettings:{get(){return this.editing?this.editingRedirect.showAdvancedSettings:this.redirectsStore.addNewRedirect.showAdvancedSettings},set(e){this.editing?this.editingRedirect.showAdvancedSettings=e:this.redirectsStore.addNewRedirect.showAdvancedSettings=e}},saveIsDisabled(){return!!this.sourceUrls.filter(e=>!e.url).length||!!this.sourceUrls.filter(e=>0<e.errors.length).length||this.redirectTypeHasTarget()&&!this.targetUrl||this.customRulesError},getRelativeAbsolute(){const e=this.targetUrl.match(/^\/([a-zA-Z0-9_\-%]*\..*)\//);return e?e[0]:null},sourceUrl(){return 1<this.sourceUrls.length?i("Source URLs",d):i("Source URL",d)},addRedirect(){return 1<this.sourceUrls.length?i("Add Redirects",d):i("Add Redirect",d)},hasTargetUrlErrors(){if(!this.targetUrl)return[];const e=[],t=J(this.targetUrl);if(!t)return e.push(i("Your target URL is not valid.",d)),e;this.targetUrl&&!this.beginsWith(this.targetUrl,"https://")&&!this.beginsWith(this.targetUrl,"http://")&&this.targetUrl.substr(0,1)!=="/"&&e.push(L(i("Your target URL should be an absolute URL like %1$s or start with a slash %2$s.",d),"<code>https://domain.com/"+t+"</code>","<code>/"+t+"</code>"));const l=this.targetUrl.match(/[|\\$]/g);return l!==null&&(this.sourceUrls.map(s=>s.regex).every(s=>s)||e.push(L(i("Your target URL contains the invalid character(s) %1$s",d),"<code>"+l+"</code>"))),e},hasTargetUrlWarnings(){if(!J(this.targetUrl))return[];const e=[];return this.getRelativeAbsolute&&e.push(L(i("Your URL appears to contain a domain inside the path: %1$s. Did you mean to use %2$s instead?",d),"<code>"+this.getRelativeAbsolute+"</code>","<code>https:/"+this.getRelativeAbsolute+"</code>")),e},getDefaultRedirectType(){let e=this.getJsonValue(this.redirectsStore.options.redirectDefaults.redirectType);const t=E.find(l=>parseInt(l.value)===parseInt(e==null?void 0:e.value));return e||(e=E[0]),t||e},getDefaultQueryParam(){let e=this.getJsonValue(this.redirectsStore.options.redirectDefaults.queryParam);const t=T.find(l=>l.value===(e==null?void 0:e.value));return e||(e=T[0]),t||e},getDefaultSlash(){return this.redirectsStore.options.redirectDefaults.ignoreSlash},getDefaultCase(){return this.redirectsStore.options.redirectDefaults.ignoreCase},getDefaultSourceUrls(){return[JSON.parse(JSON.stringify(this.getDefaultSourceUrl))]},getDefaultSourceUrl(){return{id:null,url:null,regex:!1,ignoreSlash:this.slash||this.getDefaultSlash||!1,ignoreCase:this.case||this.getDefaultCase||!1,errors:[],warnings:[]}},redirectQueryParams(){return 0<this.sourceUrls.filter(e=>e.regex).length?T.map(e=>(e.$isDisabled=!1,e.value==="exact"&&(e.$isDisabled=!0,this.queryParam.value==="exact"&&(this.queryParam=T.find(t=>!t.$isDisabled))),e)):T.map(e=>(e.$isDisabled=!1,e))},unPublishedPost(){return this.redirectHasUnPublishedPost({post_id:this.postId,postStatus:this.postStatus})}},methods:{beginsWith(e,t){return t.indexOf(e)===0||e.substr(0,t.length)===t},addUrl(){this.sourceUrls.push(JSON.parse(JSON.stringify(this.getDefaultSourceUrl)))},removeUrl(e){this.sourceUrls.splice(e,1)},addRedirects(){var e,t;if(this.genericError=!1,this.addingRedirect=!0,x()){const l=((t=(e=this.urls)==null?void 0:e[0])==null?void 0:t.url)??window.wp.data.select("core/editor").getCurrentPostAttribute("slug");l&&this.sourceUrls.map(u=>(u.url=l.startsWith("/")?l:`/${l}`,u))}this.sourceUrls.map(l=>(l.url.substr(0,4)!=="http"&&l.url.substr(0,1)!=="/"&&0<l.url.length&&!l.regex&&(l.url="/"+l.url),l)),this.redirectsStore.create({sourceUrls:this.sourceUrls,targetUrl:this.targetUrl,queryParam:this.queryParam.value,customRules:this.customRules,redirectType:this.redirectType.value,redirectTypeHasTarget:this.redirectTypeHasTarget(),group:this.log404?"404":"manual",postId:this.postId}).then(()=>{this.$emit("added-redirect"),window.aioseoBus.$emit("added-redirect"),this.reset()}).catch(l=>{this.handleError(l)})},saveChanges(){this.genericError=!1,this.addingRedirect=!0,this.sourceUrls[0].url.substr(0,4)!=="http"&&this.sourceUrls[0].url.substr(0,1)!=="/"&&0<this.sourceUrls[0].url.length&&!this.sourceUrls[0].regex&&(this.sourceUrls[0].url="/"+this.sourceUrls[0].url),this.redirectsStore.update({id:this.sourceUrls[0].id,payload:{sourceUrls:this.sourceUrls,targetUrl:this.targetUrl,queryParam:this.queryParam.value,customRules:this.customRules,redirectType:this.redirectType.value,redirectTypeHasTarget:this.redirectTypeHasTarget(),postId:this.postId}}).then(()=>{this.$emit("added-redirect"),this.reset()}).catch(e=>{console.error(e),this.handleError(e)})},handleError(e){if(e.response.status!==409||!e.response.body.failed||!e.response.body.failed.length){this.genericError=!0,this.addingRedirect=!1;return}const t=[],l=e.response.body.failed,u=i("A redirect already exists for this source URL. To make changes, edit the original instead.",d);l.forEach(s=>{const r=this.sourceUrls.findIndex(c=>c.url===s.url||s);r!==-1&&(this.sourceUrls[r].errors.find(c=>c===s.error||c===u)||this.sourceUrls[r].errors.push(s.error||u),t.push(r))});for(let s=this.sourceUrls.length-1;0<=s;s--)t.includes(s)||this.sourceUrls.splice(s,1);this.addingRedirect=!1},updateTargetUrl(e){this.targetUrl=e,this.targetUrlErrors=this.hasTargetUrlErrors,this.targetUrlWarnings=this.hasTargetUrlWarnings},reset(){if(this.showAdvancedSettings=!1,this.addingRedirect=!1,this.edit)return;const e=E.find(l=>l.value===this.type)||this.getDefaultRedirectType,t=T.find(l=>l.value===this.query)||this.getDefaultQueryParam;this.sourceUrls=[JSON.parse(JSON.stringify(this.getDefaultSourceUrl))],this.targetUrl=null,this.targetUrlErrors=[],this.targetUrlWarnings=[],this.redirectType=e||{label:"301 "+i("Moved Permanently",d),value:301},this.queryParam=t||{label:i("Ignore all parameters",d),value:"ignore"},this.customRules=[]},checkForDuplicates(){const e=[];this.sourceUrls.forEach((t,l)=>{if(!(!t.url||t.errors.length)){if(e.includes(t.url.replace(/\/$/,""))){this.sourceUrls[l].errors.push(i("This is a duplicate of a URL you are already adding. You can only add unique source URLs.",d));return}e.push(t.url.replace(/\/$/,""))}}),this.updateTargetUrl(this.targetUrl)},redirectTypeHasTarget(){return this.redirectType&&(typeof this.redirectType.noTarget>"u"||!this.redirectType.noTarget)}},mounted(){var e;0<=((e=this.sourceUrls)==null?void 0:e.length)&&(this.sourceUrls=this.getDefaultSourceUrls),this.url&&(this.editing=!0,this.sourceUrls=[{...this.getDefaultSourceUrl,...this.url}]),this.urls&&this.urls.length&&(this.editing=!0,this.sourceUrls=this.urls.map(t=>({...this.getDefaultSourceUrl,...t}))),this.sourceDisabled=this.disableSource,this.unPublishedPost&&(this.sourceUrls=this.sourceUrls.map(t=>(t.url="("+this.strings.sourceUrlSetOncePublished+")",t)),this.sourceDisabled=!0),this.target&&(this.targetUrl=this.target),this.rules&&this.rules.length!==0&&(this.customRules=this.rules),this.redirectType=E.find(t=>t.value===this.type)||this.redirectType||this.getDefaultRedirectType,this.queryParam=T.find(t=>t.value===this.query)||this.queryParam||this.getDefaultQueryParam,this.editingRedirect.showAdvancedSettings=this.isUsingAdvancedSettings}},Ve={class:"urls"},Ce={class:"source"},Pe={class:"aioseo-settings-row no-border no-margin small-padding"},Ae={class:"settings-name"},Le={class:"name small-margin"},qe=["innerHTML"],Ne={key:0,class:"url-arrow"},Ie={key:1,class:"target"},Be={class:"aioseo-settings-row no-border no-margin small-padding"},ze={class:"settings-name"},He={class:"name small-margin"},Me={class:"url"},Je={class:"aioseo-description"},Oe=o("div",{class:"break"},null,-1),Fe={class:"source"},We=["innerHTML"],Qe=o("div",{class:"url-arrow"},null,-1),Ye=o("div",{class:"target"},null,-1),je=o("hr",{class:"aioseo-add-redirection__separator"},null,-1),Ke={key:1,class:"aioseo-add-redirection__separator"},Ge={key:2,class:"settings advanced"},Ze={class:"all-settings"},Xe={class:"all-aioseo-settings-content"},xe={class:"redirect-type"},$e={class:"redirect-type__label"},et={class:"query-params"},tt={class:"query-params__label"};function rt(e,t,l,u,s,r){const c=m("core-alert"),D=m("core-add-redirection-url"),k=m("base-button"),C=m("svg-right-arrow"),P=m("core-add-redirection-target-url"),w=m("transition-slide"),B=m("base-toggle"),A=m("base-select"),z=m("svg-circle-question-mark"),H=m("core-tooltip"),M=m("custom-rules");return n(),R("div",{class:I(["aioseo-add-redirection",{"edit-url":l.edit,"log-404":l.log404}])},[s.genericError?(n(),U(c,{key:0,class:"generic-error",type:"red"},{default:_(()=>[b(p(s.strings.genericErrorMessage),1)]),_:1})):v("",!0),o("div",Ve,[o("div",Ce,[o("div",Pe,[o("div",Ae,[o("div",Le,p(r.sourceUrl),1)]),(n(!0),R(V,null,N(r.sourceUrls,(a,S)=>(n(),U(D,{key:S,url:a,"allow-delete":1<r.sourceUrls.length,onRemoveUrl:f=>r.removeUrl(S),"target-url":r.targetUrl,log404:l.log404,disableSource:s.sourceDisabled},de({_:2},[l.edit&&!s.sourceDisabled?{name:"source-url-description",fn:_(()=>[o("div",{class:"aioseo-description source-description",innerHTML:s.strings.sourceUrlDescription},null,8,qe)]),key:"0"}:void 0]),1032,["url","allow-delete","onRemoveUrl","target-url","log404","disableSource"]))),128)),!l.edit&&!l.log404&&!s.sourceDisabled?(n(),U(k,{key:0,size:"small",type:"gray",onClick:r.addUrl},{default:_(()=>[b(p(s.strings.addUrl),1)]),_:1},8,["onClick"])):v("",!0)])]),r.redirectTypeHasTarget()?(n(),R("div",Ne,[h(C)])):v("",!0),r.redirectTypeHasTarget()?(n(),R("div",Ie,[o("div",Be,[o("div",ze,[o("div",He,p(s.strings.targetUrl),1)]),o("div",Me,[h(P,{url:u.decodeUrl(r.targetUrl),errors:s.targetUrlErrors,warnings:s.targetUrlWarnings,"onUpdate:modelValue":r.updateTargetUrl},null,8,["url","errors","warnings","onUpdate:modelValue"]),o("div",Je,p(s.strings.targetUrlDescription),1),h(w,{active:!!s.targetUrlErrors.length},{default:_(()=>[o("div",null,[(n(!0),R(V,null,N(s.targetUrlErrors,(a,S)=>(n(),U(c,{key:S,class:"target-url-error",type:"red",size:"small",innerHTML:a},null,8,["innerHTML"]))),128))])]),_:1},8,["active"]),h(w,{active:!!s.targetUrlWarnings.length},{default:_(()=>[o("div",null,[(n(!0),R(V,null,N(s.targetUrlWarnings,(a,S)=>(n(),U(c,{key:S,class:"target-url-warning",type:"yellow",size:"small",innerHTML:a},null,8,["innerHTML"]))),128))])]),_:1},8,["active"])])])])):v("",!0),!l.edit&&!l.log404&&!s.sourceDisabled?(n(),R(V,{key:2},[Oe,o("div",Fe,[o("div",{class:"aioseo-description source-description",innerHTML:s.strings.sourceUrlDescription},null,8,We)]),Qe,Ye],64)):v("",!0)]),je,o("div",{class:I(["aioseo-add-redirection__settings",{advanced:r.showAdvancedSettings}])},[h(B,{modelValue:r.showAdvancedSettings,"onUpdate:modelValue":t[0]||(t[0]=a=>r.showAdvancedSettings=!r.showAdvancedSettings)},null,8,["modelValue"]),o("span",null,p(s.strings.advancedSettings),1)],2),r.showAdvancedSettings?v("",!0):(n(),R("hr",Ke)),r.showAdvancedSettings?(n(),R("div",Ge,[o("div",Ze,[o("div",Xe,[o("div",xe,[o("span",$e,p(s.strings.redirectType),1),h(A,{options:s.REDIRECT_TYPES,modelValue:r.redirectType,"onUpdate:modelValue":t[1]||(t[1]=a=>r.redirectType=a),size:"medium"},null,8,["options","modelValue"])]),h(w,{class:"advanced-settings",active:r.showAdvancedSettings},{default:_(()=>[o("div",et,[o("div",tt,[o("span",null,p(s.strings.queryParams),1),h(H,null,{tooltip:_(()=>[b(p(s.strings.queryParamsTooltip),1)]),default:_(()=>[h(z)]),_:1})]),h(A,{options:r.redirectQueryParams,modelValue:r.queryParam,"onUpdate:modelValue":t[2]||(t[2]=a=>r.queryParam=a),size:"medium"},null,8,["options","modelValue"])])]),_:1},8,["active"]),r.showAdvancedSettings?v("",!0):(n(),R("a",{key:0,class:"advanced-settings-link",href:"#",onClick:t[3]||(t[3]=ge(a=>r.showAdvancedSettings=!r.showAdvancedSettings,["prevent"]))},p(s.strings.advancedSettings),1))])]),h(w,{class:"advanced-settings",active:r.showAdvancedSettings},{default:_(()=>[(n(),U(M,{key:r.customRules,"edit-custom-rules":r.customRules,onRedirectsCustomRuleError:t[4]||(t[4]=a=>s.customRulesError=a)},null,8,["edit-custom-rules"]))]),_:1},8,["active"])])):v("",!0),o("div",{class:I(["aioseo-add-redirection__actions",{advanced:r.showAdvancedSettings}])},[h(k,{size:"medium",type:"blue",onClick:t[5]||(t[5]=a=>l.edit?r.saveChanges():r.addRedirects()),loading:s.addingRedirect,disabled:r.saveIsDisabled},{default:_(()=>[b(p(l.edit?s.strings.saveChanges:r.addRedirect),1)]),_:1},8,["loading","disabled"]),l.edit?(n(),U(k,{key:0,size:"medium",type:"gray",onClick:t[6]||(t[6]=a=>e.$emit("cancel",!0)),class:"cancel-edit-row"},{default:_(()=>[b(p(s.strings.cancel),1)]),_:1})):v("",!0)],2)],2)}const Tt=K(Ee,[["render",rt]]);export{Tt as C};
