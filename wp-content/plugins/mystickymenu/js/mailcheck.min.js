var Mailcheck={domainThreshold:2,secondLevelThreshold:2,topLevelThreshold:2,defaultDomains:["gmail.com"],defaultSecondLevelDomains:["gmail"],defaultTopLevelDomains:["com"],run:function(e){e.domains=e.domains||Mailcheck.defaultDomains,e.secondLevelDomains=e.secondLevelDomains||Mailcheck.defaultSecondLevelDomains,e.topLevelDomains=e.topLevelDomains||Mailcheck.defaultTopLevelDomains,e.distanceFunction=e.distanceFunction||Mailcheck.sift4Distance;var n=function(e){return e},a=e.suggested||n,i=e.empty||n,t=Mailcheck.suggest(Mailcheck.encodeEmail(e.email),e.domains,e.secondLevelDomains,e.topLevelDomains,e.distanceFunction);return t?a(t):i()},suggest:function(e,n,a,i,t){e=e.toLowerCase();var o=this.splitEmail(e);if(a&&i&&-1!==a.indexOf(o.secondLevelDomain)&&-1!==i.indexOf(o.topLevelDomain))return!1;var l=this.findClosestDomain(o.domain,n,t,this.domainThreshold);if(l)return l!=o.domain&&{address:o.address,domain:l,full:o.address+"@"+l};var r=this.findClosestDomain(o.secondLevelDomain,a,t,this.secondLevelThreshold),s=this.findClosestDomain(o.topLevelDomain,i,t,this.topLevelThreshold);if(o.domain){l=o.domain;var c=!1;if(r&&r!=o.secondLevelDomain&&(l=l.replace(o.secondLevelDomain,r),c=!0),s&&s!=o.topLevelDomain&&""!==o.secondLevelDomain&&(l=l.replace(new RegExp(o.topLevelDomain+"$"),s),c=!0),c)return{address:o.address,domain:l,full:o.address+"@"+l}}return!1},findClosestDomain:function(e,n,a,i){var t;i=i||this.topLevelThreshold;var o=1/0,l=null;if(!e||!n)return!1;a||(a=this.sift4Distance);for(var r=0;r<n.length;r++){if(e===n[r])return e;(t=a(e,n[r]))<o&&(o=t,l=n[r])}return o<=i&&null!==l&&l},sift4Distance:function(e,n,a){if(void 0===a&&(a=5),!e||!e.length)return n?n.length:0;if(!n||!n.length)return e.length;for(var i=e.length,t=n.length,o=0,l=0,r=0,s=0,c=0,d=[];o<i&&l<t;){if(e.charAt(o)==n.charAt(l)){s++;for(var h=!1,u=0;u<d.length;){var f=d[u];if(o<=f.c1||l<=f.c2){(h=Math.abs(l-o)>=Math.abs(f.c2-f.c1))?c++:f.trans||(f.trans=!0,c++);break}o>f.c2&&l>f.c1?d.splice(u,1):u++}d.push({c1:o,c2:l,trans:h})}else{r+=s,s=0,o!=l&&(o=l=Math.min(o,l));for(var m=0;m<a&&(o+m<i||l+m<t);m++){if(o+m<i&&e.charAt(o+m)==n.charAt(l)){o+=m-1,l--;break}if(l+m<t&&e.charAt(o)==n.charAt(l+m)){o--,l+=m-1;break}}}l++,(++o>=i||l>=t)&&(r+=s,s=0,o=l=Math.min(o,l))}return r+=s,Math.round(Math.max(i,t)-r+c)},splitEmail:function(e){var n=(e=null!==e?e.replace(/^\s*/,"").replace(/\s*$/,""):null).split("@");if(n.length<2)return!1;for(var a=0;a<n.length;a++)if(""===n[a])return!1;var i=n.pop(),t=i.split("."),o="",l="";if(0===t.length)return!1;if(1==t.length)l=t[0];else{o=t[0];for(var r=1;r<t.length;r++)l+=t[r]+".";l=l.substring(0,l.length-1)}return{topLevelDomain:l,secondLevelDomain:o,domain:i,address:n.join("@")}},encodeEmail:function(e){var n=encodeURI(e);return n=n.replace("%20"," ").replace("%25","%").replace("%5E","^").replace("%60","`").replace("%7B","{").replace("%7C","|").replace("%7D","}")}};"undefined"!=typeof module&&module.exports&&(module.exports=Mailcheck),"function"==typeof define&&define.amd&&define("mailcheck",[],function(){return Mailcheck}),"undefined"!=typeof window&&window.jQuery&&(jQuery.fn.mailcheck=function(e){var n=this;if(e.suggested){var a=e.suggested;e.suggested=function(e){a(n,e)}}if(e.empty){var i=e.empty;e.empty=function(){i.call(null,n)}}e.email=this.val(),Mailcheck.run(e)});